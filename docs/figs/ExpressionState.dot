digraph {
  graph [nodesep=0.3,ranksep=1.0,splines=line]
  node [shape=box,style=rounded,fontname=Helvetica,fontsize=10,margin="0.1,0.01"]
  edge [fontname=Helvetica,fontsize=8]

  Start [shape=point,label=""]
  Initial
  Pilot
  Gradient
  Value

  Start -> Initial
  Initial -> Value [label="value()"]
  Initial -> Pilot [label="  pilot()\l  count <- 1\l"]
  Pilot:w -> Pilot:w [label="\lpilot()\l++count\l",constraint=false]
  Pilot:s -> Pilot:s [label="grad() if count > 1\l--count\l",constraint=false]
  Pilot -> Gradient [label="grad() if count == 1\l--count\l"]
  Pilot -> Value [label="value()"]
  Gradient -> Pilot [label="move()\lcount <- 1\l"]
  Gradient -> Value [label="value()"]

  {rank=same; Start Initial[group=g1] Value[group=g2]}
  {rank=same; Pilot[group=g1] Gradient[group=g2]}
}
